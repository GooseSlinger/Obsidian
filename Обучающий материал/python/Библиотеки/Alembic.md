## üß∞ 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Alembic
```bash
pip install alembic
```
## üìÅ 2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Alembic
–í—ã–ø–æ–ª–Ω–∏ —ç—Ç–æ –≤ –∫–æ—Ä–Ω–µ —Å–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:
```bash
alembic init alembic
```
## üìÑ 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `alembic.ini` –∏ `env.py`

### ‚úÖ `alembic.ini`

–£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤ —Ñ–∞–π–ª–µ `alembic.ini` —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `script_location` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å–æ–∑–¥–∞–Ω–Ω—É—é –ø–∞–ø–∫—É `alembic`):
```ini
script_location = alembic
```

### ‚úÖ `alembic/env.py`

–í —Ñ–∞–π–ª–µ `alembic/env.py` –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Ç–≤–æ–π `SQLAlchemy Base` –∏ `engine`.

–¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—å —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î:
```python
from your_project.database import engine  # –Ω–∞–ø—Ä–∏–º–µ—Ä

def run_migrations_online():
    connectable = engine
    with connectable.connect() as connection:
        context.configure(
            connection=connection,
            target_metadata=target_metadata
        )
        with context.begin_transaction():
            context.run_migrations()
```
## üìù 4. –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —Ç—ã –∏–∑–º–µ–Ω–∏–ª –º–æ–¥–µ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–∏–ª –Ω–æ–≤–æ–µ –ø–æ–ª–µ), —Å–æ–∑–¥–∞–π –º–∏–≥—Ä–∞—Ü–∏—é:
```bash
alembic revision --autogenerate -m "migration_init"
```
- `--autogenerate` ‚Äî –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏ –∏ —Ç–µ–∫—É—â–µ–π —Å—Ö–µ–º–æ–π.
- `-m` ‚Äî –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –º–∏–≥—Ä–∞—Ü–∏–∏.
## üîß 5. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

–ß—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∫ –ë–î:
```bash
alembic upgrade head
```
## üîô 6. –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

–û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏:
```bash
alembic downgrade -1
```
–ò–ª–∏ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏:
```bash
alembic downgrade abcdef123456
```
## üìã 7. –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–π
```bash
alembic history
```
## üß™ 8. –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞                    | –û–ø–∏—Å–∞–Ω–∏–µ                                     |
| -------------------------- | -------------------------------------------- |
| `alembic current`          | –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é –ë–î                   |
| `alembic heads`            | –ü–æ—Å–ª–µ–¥–Ω—è—è –º–∏–≥—Ä–∞—Ü–∏—è                           |
| `alembic branches`         | –ü–æ–∫–∞–∑–∞—Ç—å –≤–µ—Ç–∫–∏ –º–∏–≥—Ä–∞—Ü–∏–π                      |
| `alembic stamp <revision>` | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å –≤–µ—Ä—Å–∏–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ë–î |

---

## üí° –°–æ–≤–µ—Ç—ã

- –ù–µ –∑–∞–±—ã–≤–∞–π –¥–µ–ª–∞—Ç—å `--autogenerate`, —á—Ç–æ–±—ã Alembic –º–æ–≥ —Å—Ä–∞–≤–Ω–∏—Ç—å –º–æ–¥–µ–ª–∏ —Å –ë–î.
- –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–µ –≤—Å–µ–≥–¥–∞ –∏–¥–µ–∞–ª—å–Ω–∞ ‚Äî –ø—Ä–æ–≤–µ—Ä—è–π —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥.
- –•—Ä–∞–Ω–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ —Å–∏—Å—Ç–µ–º–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π (Git).
- –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é –ë–î.